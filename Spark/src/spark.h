/*
																Apache License
												   Version 2.0, January 2004
												http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

		  "License" shall mean the terms and conditions for use, reproduction,
		  and distribution as defined by Sections 1 through 9 of this document.

		  "Licensor" shall mean the copyright owner or entity authorized by
		  the copyright owner that is granting the License.

		  "Legal Entity" shall mean the union of the acting entity and all
		  other entities that control, are controlled by, or are under common
		  control with that entity. For the purposes of this definition,
		  "control" means (i) the power, direct or indirect, to cause the
		  direction or management of such entity, whether by contract or
		  otherwise, or (ii) ownership of fifty percent (50%) or more of the
		  outstanding shares, or (iii) beneficial ownership of such entity.

		  "You" (or "Your") shall mean an individual or Legal Entity
		  exercising permissions granted by this License.

		  "Source" form shall mean the preferred form for making modifications,
		  including but not limited to software source code, documentation
		  source, and configuration files.

		  "Object" form shall mean any form resulting from mechanical
		  transformation or translation of a Source form, including but
		  not limited to compiled object code, generated documentation,
		  and conversions to other media types.

		  "Work" shall mean the work of authorship, whether in Source or
		  Object form, made available under the License, as indicated by a
		  copyright notice that is included in or attached to the work
		  (an example is provided in the Appendix below).

		  "Derivative Works" shall mean any work, whether in Source or Object
		  form, that is based on (or derived from) the Work and for which the
		  editorial revisions, annotations, elaborations, or other modifications
		  represent, as a whole, an original work of authorship. For the
   purposes of this License, Derivative Works shall not include works that
   remain separable from, or merely link (or bind by name) to the interfaces of,
		  the Work and Derivative Works thereof.

		  "Contribution" shall mean any work of authorship, including
		  the original version of the Work and any modifications or additions
		  to that Work or Derivative Works thereof, that is intentionally
		  submitted to Licensor for inclusion in the Work by the copyright owner
		  or by an individual or Legal Entity authorized to submit on behalf of
		  the copyright owner. For the purposes of this definition, "submitted"
		  means any form of electronic, verbal, or written communication sent
		  to the Licensor or its representatives, including but not limited to
		  communication on electronic mailing lists, source code control
   systems, and issue tracking systems that are managed by, or on behalf of, the
		  Licensor for the purpose of discussing and improving the Work, but
		  excluding communication that is conspicuously marked or otherwise
		  designated in writing by the copyright owner as "Not a Contribution."

		  "Contributor" shall mean Licensor and any individual or Legal Entity
		  on behalf of whom a Contribution has been received by Licensor and
		  subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions of
		  this License, each Contributor hereby grants to You a perpetual,
		  worldwide, non-exclusive, no-charge, royalty-free, irrevocable
		  copyright license to reproduce, prepare Derivative Works of,
		  publicly display, publicly perform, sublicense, and distribute the
		  Work and such Derivative Works in Source or Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
		  this License, each Contributor hereby grants to You a perpetual,
		  worldwide, non-exclusive, no-charge, royalty-free, irrevocable
		  (except as stated in this section) patent license to make, have made,
		  use, offer to sell, sell, import, and otherwise transfer the Work,
		  where such license applies only to those patent claims licensable
		  by such Contributor that are necessarily infringed by their
		  Contribution(s) alone or by combination of their Contribution(s)
		  with the Work to which such Contribution(s) was submitted. If You
		  institute patent litigation against any entity (including a
		  cross-claim or counterclaim in a lawsuit) alleging that the Work
		  or a Contribution incorporated within the Work constitutes direct
		  or contributory patent infringement, then any patent licenses
		  granted to You under this License for that Work shall terminate
		  as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
		  Work or Derivative Works thereof in any medium, with or without
		  modifications, and in Source or Object form, provided that You
		  meet the following conditions:

		  (a) You must give any other recipients of the Work or
				  Derivative Works a copy of this License; and

		  (b) You must cause any modified files to carry prominent notices
				  stating that You changed the files; and

		  (c) You must retain, in the Source form of any Derivative Works
				  that You distribute, all copyright, patent, trademark, and
				  attribution notices from the Source form of the Work,
				  excluding those notices that do not pertain to any part of
				  the Derivative Works; and

		  (d) If the Work includes a "NOTICE" text file as part of its
				  distribution, then any Derivative Works that You distribute
   must include a readable copy of the attribution notices contained within such
   NOTICE file, excluding those notices that do not pertain to any part of the
   Derivative Works, in at least one of the following places: within a NOTICE
   text file distributed as part of the Derivative Works; within the Source form
   or documentation, if provided along with the Derivative Works; or, within a
   display generated by the Derivative Works, if and wherever such third-party
   notices normally appear. The contents of the NOTICE file are for
   informational purposes only and do not modify the License. You may add Your
   own attribution notices within Derivative Works that You distribute,
   alongside or as an addendum to the NOTICE text from the Work, provided that
   such additional attribution notices cannot be construed as modifying the
   License.

		  You may add Your own copyright statement to Your modifications and
		  may provide additional or different license terms and conditions
		  for use, reproduction, or distribution of Your modifications, or
		  for any such Derivative Works as a whole, provided Your use,
		  reproduction, and distribution of the Work otherwise complies with
		  the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state otherwise,
		  any Contribution intentionally submitted for inclusion in the Work
		  by You to the Licensor shall be under the terms and conditions of
		  this License, without any additional terms or conditions.
		  Notwithstanding the above, nothing herein shall supersede or modify
		  the terms of any separate license agreement you may have executed
		  with Licensor regarding such Contributions.

   6. Trademarks. This License does not grant permission to use the trade
		  names, trademarks, service marks, or product names of the Licensor,
		  except as required for reasonable and customary use in describing the
		  origin of the Work and reproducing the content of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
		  agreed to in writing, Licensor provides the Work (and each
		  Contributor provides its Contributions) on an "AS IS" BASIS,
		  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
		  implied, including, without limitation, any warranties or conditions
		  of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
		  PARTICULAR PURPOSE. You are solely responsible for determining the
		  appropriateness of using or redistributing the Work and assume any
		  risks associated with Your exercise of permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
		  whether in tort (including negligence), contract, or otherwise,
		  unless required by applicable law (such as deliberate and grossly
		  negligent acts) or agreed to in writing, shall any Contributor be
		  liable to You for damages, including any direct, indirect, special,
		  incidental, or consequential damages of any character arising as a
		  result of this License or out of the use or inability to use the
		  Work (including but not limited to damages for loss of goodwill,
		  work stoppage, computer failure or malfunction, or any and all
		  other commercial damages or losses), even if such Contributor
		  has been advised of the possibility of such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
		  the Work or Derivative Works thereof, You may choose to offer,
		  and charge a fee for, acceptance of support, warranty, indemnity,
		  or other liability obligations and/or rights consistent with this
		  License. However, in accepting such obligations, You may act only
		  on Your own behalf and on Your sole responsibility, not on behalf
		  of any other Contributor, and only if You agree to indemnify,
		  defend, and hold each Contributor harmless for any liability
		  incurred by, or claims asserted against, such Contributor by reason
		  of your accepting any such warranty or additional liability.

   END OF TERMS AND CONDITIONS
*/

#ifndef __SPARK_H__
#define __SPARK_H__

#include <assert.h>

#include "spark_defines.h"
#include "spark_types.h"
#include "spark_aliases.h"
#include "spark_assert.h"
#include "spark_shader.h"
#include "spark_util.h"

#ifdef __cplusplus
extern "C" {
#endif

SPARKAPI SparkConstString SPARKCALL SparkTypeToString(SparkType type);
SPARKAPI SparkType SPARKCALL SparkStringToType(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL SparkErrorToString(SparkError error);
SPARKAPI SparkError SPARKCALL SparkStringToError(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL SparkResultToString(SparkResult result);
SPARKAPI SparkResult SPARKCALL SparkStringToResult(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL SparkAccessToString(SparkAccess access);
SPARKAPI SparkAccess SPARKCALL SparkStringToAccess(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL
SparkMouseButtonToString(SparkMouseButton button);
SPARKAPI SparkMouseButton SPARKCALL
SparkStringToMouseButton(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL SparkKeyToString(SparkKey key);
SPARKAPI SparkKey SPARKCALL SparkStringToKey(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL
SparkModifierToString(SparkModifier modifier);
SPARKAPI SparkModifier SPARKCALL SparkStringToModifier(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL SparkActionToString(SparkAction action);
SPARKAPI SparkAction SPARKCALL SparkStringToAction(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL SparkCursorToString(SparkCursor cursor);
SPARKAPI SparkCursor SPARKCALL SparkStringToCursor(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL
SparkEventTypeToString(SparkEventType eventType);
SPARKAPI SparkEventType SPARKCALL
SparkStringToEventType(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL
SparkShaderTypeToString(SparkShaderType shaderType);
SPARKAPI SparkShaderType SPARKCALL
SparkStringToShaderType(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL
SparkPrimitiveTypeToString(SparkPrimitiveType primitiveType);
SPARKAPI SparkPrimitiveType SPARKCALL
SparkStringToPrimitiveType(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL
SparkBlendModeToString(SparkBlendMode blendMode);
SPARKAPI SparkBlendMode SPARKCALL
SparkStringToBlendMode(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL
SparkTextureFilterToString(SparkTextureFilter filter);
SPARKAPI SparkTextureFilter SPARKCALL
SparkStringToTextureFilter(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL SparkLogLevelToString(SparkLogLevel level);
SPARKAPI SparkLogLevel SPARKCALL SparkStringToLogLevel(SparkConstString string);
SPARKAPI SparkConstString SPARKCALL SparkRenderAPIToString(SparkRenderAPI api);
SPARKAPI SparkRenderAPI SPARKCALL
SparkStringToRenderAPI(SparkConstString string);

SPARKAPI SparkConstString SPARKCALL SparkFormatString(SparkConstString format,
	...);
SPARKAPI SparkConstString SPARKCALL SparkGetTime();
SPARKAPI SparkConstString SPARKCALL
SparkGetFileExtension(SparkConstString filename);

SPARKAPI SparkVoid SPARKCALL SparkLogImpl(SparkLogLevel log_level,
	SparkConstString format, ...);

#pragma region MATH

#ifdef near
#undef near
#endif

#ifdef far
#undef far
#endif

SPARKAPI SparkVec2 SPARKCALL SparkVec2Add(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Subtract(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Multiply(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Divide(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Scale(SparkVec2 a, SparkScalar s);
SPARKAPI SparkScalar SPARKCALL SparkVec2Dot(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkScalar SPARKCALL SparkVec2Length(SparkVec2 a);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Normalize(SparkVec2 a);
SPARKAPI SparkScalar SPARKCALL SparkVec2Distance(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Negate(SparkVec2 a);
SPARKAPI SparkScalar SPARKCALL SparkVec2Angle(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Reflect(SparkVec2 v, SparkVec2 n);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Lerp(SparkVec2 a, SparkVec2 b,
	SparkScalar t);

SPARKAPI SparkVec3 SPARKCALL SparkVec3Add(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Subtract(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Multiply(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Divide(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Scale(SparkVec3 a, SparkScalar s);
SPARKAPI SparkScalar SPARKCALL SparkVec3Dot(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Cross(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkScalar SPARKCALL SparkVec3Length(SparkVec3 a);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Normalize(SparkVec3 a);
SPARKAPI SparkScalar SPARKCALL SparkVec3Distance(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Negate(SparkVec3 a);
SPARKAPI SparkScalar SPARKCALL SparkVec3Angle(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Reflect(SparkVec3 v, SparkVec3 n);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Lerp(SparkVec3 a, SparkVec3 b,
	SparkScalar t);

SPARKAPI SparkVec4 SPARKCALL SparkVec4Add(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Subtract(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Multiply(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Divide(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Scale(SparkVec4 a, SparkScalar s);
SPARKAPI SparkScalar SPARKCALL SparkVec4Dot(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkScalar SPARKCALL SparkVec4Length(SparkVec4 a);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Normalize(SparkVec4 a);
SPARKAPI SparkScalar SPARKCALL SparkVec4Distance(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Negate(SparkVec4 a);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Lerp(SparkVec4 a, SparkVec4 b,
	SparkScalar t);

SPARKAPI SparkMat2 SPARKCALL SparkMat2Add(SparkMat2 a, SparkMat2 b);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Subtract(SparkMat2 a, SparkMat2 b);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Multiply(SparkMat2 a, SparkMat2 b);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Scale(SparkMat2 a, SparkScalar s);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Transpose(SparkMat2 m);
SPARKAPI SparkScalar SPARKCALL SparkMat2Determinant(SparkMat2 m);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Inverse(SparkMat2 m);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Identity();

SPARKAPI SparkMat3 SPARKCALL SparkMat3Add(SparkMat3 a, SparkMat3 b);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Subtract(SparkMat3 a, SparkMat3 b);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Multiply(SparkMat3 a, SparkMat3 b);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Scale(SparkMat3 a, SparkScalar s);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Transpose(SparkMat3 m);
SPARKAPI SparkScalar SPARKCALL SparkMat3Determinant(SparkMat3 m);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Inverse(SparkMat3 m);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Identity();

SPARKAPI SparkMat4 SPARKCALL SparkMat4Add(SparkMat4 a, SparkMat4 b);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Subtract(SparkMat4 a, SparkMat4 b);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Multiply(SparkMat4 a, SparkMat4 b);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Scale(SparkMat4 a, SparkScalar s);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Transpose(SparkMat4 m);
SPARKAPI SparkScalar SPARKCALL SparkMat4Determinant(SparkMat4 m);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Inverse(SparkMat4 m);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Identity();
SPARKAPI SparkMat4 SPARKCALL SparkMat4Translate(SparkVec3 translation);
SPARKAPI SparkMat4 SPARKCALL SparkMat4ScaleVec3(SparkVec3 scale);
SPARKAPI SparkMat4 SPARKCALL SparkMat4ScaleScalar(SparkScalar scale);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Rotate(SparkScalar angle, SparkVec3 axis);
SPARKAPI SparkMat4 SPARKCALL SparkMat4RotateX(SparkScalar angle);
SPARKAPI SparkMat4 SPARKCALL SparkMat4RotateY(SparkScalar angle);
SPARKAPI SparkMat4 SPARKCALL SparkMat4RotateZ(SparkScalar angle);
SPARKAPI SparkMat4 SPARKCALL SparkMat4LookAt(SparkVec3 eye, SparkVec3 center,
	SparkVec3 up);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Perspective(SparkScalar fovy,
	SparkScalar aspect,
	SparkScalar near,
	SparkScalar far);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Ortho(SparkScalar left, SparkScalar right,
	SparkScalar bottom, SparkScalar top,
	SparkScalar near, SparkScalar far);

SPARKAPI SparkVec3 SPARKCALL SparkVec3Transform(SparkVec3 v, SparkMat4 m);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Transform(SparkVec4 v, SparkMat4 m);

SPARKAPI SparkQuat SPARKCALL SparkQuatMultiply(SparkQuat a, SparkQuat b);
SPARKAPI SparkQuat SPARKCALL SparkQuatConjugate(SparkQuat q);
SPARKAPI SparkQuat SPARKCALL SparkQuatInverse(SparkQuat q);
SPARKAPI SparkQuat SPARKCALL SparkQuatNormalize(SparkQuat q);
SPARKAPI SparkQuat SPARKCALL SparkQuatFromAxisAngle(SparkVec3 axis,
	SparkScalar angle);
SPARKAPI SparkVoid SPARKCALL SparkQuatToAxisAngle(SparkQuat q, SparkVec3* axis,
	SparkScalar* angle);
SPARKAPI SparkMat4 SPARKCALL SparkQuatToMat4(SparkQuat q);
SPARKAPI SparkQuat SPARKCALL SparkQuatSlerp(SparkQuat a, SparkQuat b,
	SparkScalar t);

SPARKAPI SparkScalar SPARKCALL SparkRadians(SparkScalar degrees);
SPARKAPI SparkScalar SPARKCALL SparkDegrees(SparkScalar radians);

SPARKAPI SparkScalar SPARKCALL SparkSin(SparkScalar angle);
SPARKAPI SparkScalar SPARKCALL SparkCos(SparkScalar angle);
SPARKAPI SparkScalar SPARKCALL SparkTan(SparkScalar angle);
SPARKAPI SparkScalar SPARKCALL SparkASin(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkACos(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkATan(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkATan2(SparkScalar y, SparkScalar x);

SPARKAPI SparkScalar SPARKCALL SparkSqrt(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkPow(SparkScalar base, SparkScalar exponent);
SPARKAPI SparkScalar SPARKCALL SparkExp(SparkScalar exponent);
SPARKAPI SparkScalar SPARKCALL SparkLogs(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkAbs(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkFloor(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkCeil(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkMix(SparkScalar a, SparkScalar b,
	SparkScalar t);

/* General math function declarations */

SPARKAPI SparkScalar SPARKCALL SparkMinS(SparkScalar a, SparkScalar b);
SPARKAPI SparkScalar SPARKCALL SparkMaxS(SparkScalar a, SparkScalar b);
SPARKAPI SparkScalar SPARKCALL SparkClampS(SparkScalar x, SparkScalar min_val,
	SparkScalar max_val);
SPARKAPI SparkScalar SPARKCALL SparkMixS(SparkScalar x, SparkScalar y,
	SparkScalar t);
SPARKAPI SparkScalar SPARKCALL SparkStepS(SparkScalar edge, SparkScalar x);
SPARKAPI SparkScalar SPARKCALL SparkSmoothStepS(SparkScalar edge0,
	SparkScalar edge1,
	SparkScalar x);
SPARKAPI SparkScalar SPARKCALL SparkSign(SparkScalar x);
SPARKAPI SparkScalar SPARKCALL SparkMod(SparkScalar x, SparkScalar y);

/* Vector and matrix type conversion functions */

SPARKAPI SparkVec3 SPARKCALL SparkVec2ToVec3(SparkVec2 v, SparkScalar z);
SPARKAPI SparkVec4 SPARKCALL SparkVec3ToVec4(SparkVec3 v, SparkScalar w);
SPARKAPI SparkVec2 SPARKCALL SparkVec3ToVec2(SparkVec3 v);
SPARKAPI SparkVec3 SPARKCALL SparkVec4ToVec3(SparkVec4 v);

/* Functions between different vector and matrix types */

SPARKAPI SparkVec2 SPARKCALL SparkMat2MultiplyVec2(SparkMat2 m, SparkVec2 v);
SPARKAPI SparkVec3 SPARKCALL SparkMat3MultiplyVec3(SparkMat3 m, SparkVec3 v);
SPARKAPI SparkVec4 SPARKCALL SparkMat4MultiplyVec4(SparkMat4 m, SparkVec4 v);
SPARKAPI SparkVec3 SPARKCALL SparkMat4MultiplyVec3(SparkMat4 m, SparkVec3 v);

/* Updated math function declarations */

SPARKAPI SparkVec2 SPARKCALL SparkVec2Add(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Subtract(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Multiply(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Divide(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Scale(SparkVec2 a, SparkScalar s);
SPARKAPI SparkScalar SPARKCALL SparkVec2Dot(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkScalar SPARKCALL SparkVec2Length(SparkVec2 a);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Normalize(SparkVec2 a);
SPARKAPI SparkScalar SPARKCALL SparkVec2Distance(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Negate(SparkVec2 a);
SPARKAPI SparkScalar SPARKCALL SparkVec2Angle(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Reflect(SparkVec2 v, SparkVec2 n);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Lerp(SparkVec2 a, SparkVec2 b,
	SparkScalar t);

SPARKAPI SparkVec3 SPARKCALL SparkVec3Add(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Subtract(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Multiply(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Divide(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Scale(SparkVec3 a, SparkScalar s);
SPARKAPI SparkScalar SPARKCALL SparkVec3Dot(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Cross(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkScalar SPARKCALL SparkVec3Length(SparkVec3 a);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Normalize(SparkVec3 a);
SPARKAPI SparkScalar SPARKCALL SparkVec3Distance(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Negate(SparkVec3 a);
SPARKAPI SparkScalar SPARKCALL SparkVec3Angle(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Reflect(SparkVec3 v, SparkVec3 n);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Lerp(SparkVec3 a, SparkVec3 b,
	SparkScalar t);

SPARKAPI SparkVec4 SPARKCALL SparkVec4Add(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Subtract(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Multiply(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Divide(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Scale(SparkVec4 a, SparkScalar s);
SPARKAPI SparkScalar SPARKCALL SparkVec4Dot(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkScalar SPARKCALL SparkVec4Length(SparkVec4 a);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Normalize(SparkVec4 a);
SPARKAPI SparkScalar SPARKCALL SparkVec4Distance(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Negate(SparkVec4 a);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Lerp(SparkVec4 a, SparkVec4 b,
	SparkScalar t);

/* Matrix functions */

SPARKAPI SparkMat2 SPARKCALL SparkMat2Add(SparkMat2 a, SparkMat2 b);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Subtract(SparkMat2 a, SparkMat2 b);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Multiply(SparkMat2 a, SparkMat2 b);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Scale(SparkMat2 m, SparkScalar s);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Transpose(SparkMat2 m);
SPARKAPI SparkScalar SPARKCALL SparkMat2Determinant(SparkMat2 m);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Inverse(SparkMat2 m);
SPARKAPI SparkMat2 SPARKCALL SparkMat2Identity();

SPARKAPI SparkMat3 SPARKCALL SparkMat3Add(SparkMat3 a, SparkMat3 b);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Subtract(SparkMat3 a, SparkMat3 b);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Multiply(SparkMat3 a, SparkMat3 b);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Scale(SparkMat3 m, SparkScalar s);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Transpose(SparkMat3 m);
SPARKAPI SparkScalar SPARKCALL SparkMat3Determinant(SparkMat3 m);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Inverse(SparkMat3 m);
SPARKAPI SparkMat3 SPARKCALL SparkMat3Identity();

SPARKAPI SparkMat4 SPARKCALL SparkMat4Add(SparkMat4 a, SparkMat4 b);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Subtract(SparkMat4 a, SparkMat4 b);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Multiply(SparkMat4 a, SparkMat4 b);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Scale(SparkMat4 m, SparkScalar s);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Transpose(SparkMat4 m);
SPARKAPI SparkScalar SPARKCALL SparkMat4Determinant(SparkMat4 m);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Inverse(SparkMat4 m);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Identity();
SPARKAPI SparkMat4 SPARKCALL SparkMat4Translate(SparkVec3 translation);
SPARKAPI SparkMat4 SPARKCALL SparkMat4ScaleVec3(SparkVec3 scale);
SPARKAPI SparkMat4 SPARKCALL SparkMat4ScaleScalar(SparkScalar scale);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Rotate(SparkScalar angle, SparkVec3 axis);
SPARKAPI SparkMat4 SPARKCALL SparkMat4RotateX(SparkScalar angle);
SPARKAPI SparkMat4 SPARKCALL SparkMat4RotateY(SparkScalar angle);
SPARKAPI SparkMat4 SPARKCALL SparkMat4RotateZ(SparkScalar angle);
SPARKAPI SparkMat4 SPARKCALL SparkMat4LookAt(SparkVec3 eye, SparkVec3 center,
	SparkVec3 up);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Perspective(SparkScalar fovy,
	SparkScalar aspect,
	SparkScalar near,
	SparkScalar far);
SPARKAPI SparkMat4 SPARKCALL SparkMat4Ortho(SparkScalar left, SparkScalar right,
	SparkScalar bottom, SparkScalar top,
	SparkScalar near, SparkScalar far);

/* Quaternion functions */

SPARKAPI SparkQuat SPARKCALL SparkQuatMultiply(SparkQuat a, SparkQuat b);
SPARKAPI SparkQuat SPARKCALL SparkQuatConjugate(SparkQuat q);
SPARKAPI SparkQuat SPARKCALL SparkQuatInverse(SparkQuat q);
SPARKAPI SparkQuat SPARKCALL SparkQuatNormalize(SparkQuat q);
SPARKAPI SparkQuat SPARKCALL SparkQuatFromAxisAngle(SparkVec3 axis,
	SparkScalar angle);
SPARKAPI SparkVoid SPARKCALL SparkQuatToAxisAngle(SparkQuat q, SparkVec3* axis,
	SparkScalar* angle);
SPARKAPI SparkMat4 SPARKCALL SparkQuatToMat4(SparkQuat q);
SPARKAPI SparkQuat SPARKCALL SparkQuatSlerp(SparkQuat a, SparkQuat b,
	SparkScalar t);

/* Trigonometric functions */

SPARKAPI SparkScalar SPARKCALL SparkRadians(SparkScalar degrees);
SPARKAPI SparkScalar SPARKCALL SparkDegrees(SparkScalar radians);

SPARKAPI SparkScalar SPARKCALL SparkSin(SparkScalar angle);
SPARKAPI SparkScalar SPARKCALL SparkCos(SparkScalar angle);
SPARKAPI SparkScalar SPARKCALL SparkTan(SparkScalar angle);
SPARKAPI SparkScalar SPARKCALL SparkASin(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkACos(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkATan(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkATan2(SparkScalar y, SparkScalar x);

/* Exponential and logarithmic functions */

SPARKAPI SparkScalar SPARKCALL SparkExp(SparkScalar exponent);
SPARKAPI SparkScalar SPARKCALL SparkLog2(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkPow(SparkScalar base, SparkScalar exponent);
SPARKAPI SparkScalar SPARKCALL SparkSqrt(SparkScalar value);
SPARKAPI SparkScalar SPARKCALL SparkInverseSqrt(SparkScalar value);

/* Functions operating on vectors */

SPARKAPI SparkVec3 SPARKCALL SparkCross(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkScalar SPARKCALL SparkDistance(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkScalar SPARKCALL SparkLength(SparkVec3 v);
SPARKAPI SparkVec3 SPARKCALL SparkNormalize(SparkVec3 v);
SPARKAPI SparkScalar SPARKCALL SparkDot(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkReflect(SparkVec3 v, SparkVec3 n);
SPARKAPI SparkVec3 SPARKCALL SparkRefract(SparkVec3 v, SparkVec3 n,
	SparkScalar eta);

/* Component-wise vector operations */

SPARKAPI SparkVec2 SPARKCALL SparkVec2Min(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Max(SparkVec2 a, SparkVec2 b);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Clamp(SparkVec2 v, SparkVec2 min_val,
	SparkVec2 max_val);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Mix(SparkVec2 a, SparkVec2 b,
	SparkScalar t);
SPARKAPI SparkVec2 SPARKCALL SparkVec2Step(SparkVec2 edge, SparkVec2 x);
SPARKAPI SparkVec2 SPARKCALL SparkVec2SmoothStep(SparkVec2 edge0,
	SparkVec2 edge1, SparkVec2 x);

SPARKAPI SparkVec3 SPARKCALL SparkVec3Min(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Max(SparkVec3 a, SparkVec3 b);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Clamp(SparkVec3 v, SparkVec3 min_val,
	SparkVec3 max_val);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Mix(SparkVec3 a, SparkVec3 b,
	SparkScalar t);
SPARKAPI SparkVec3 SPARKCALL SparkVec3Step(SparkVec3 edge, SparkVec3 x);
SPARKAPI SparkVec3 SPARKCALL SparkVec3SmoothStep(SparkVec3 edge0,
	SparkVec3 edge1, SparkVec3 x);

SPARKAPI SparkVec4 SPARKCALL SparkVec4Min(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Max(SparkVec4 a, SparkVec4 b);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Clamp(SparkVec4 v, SparkVec4 min_val,
	SparkVec4 max_val);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Mix(SparkVec4 a, SparkVec4 b,
	SparkScalar t);
SPARKAPI SparkVec4 SPARKCALL SparkVec4Step(SparkVec4 edge, SparkVec4 x);
SPARKAPI SparkVec4 SPARKCALL SparkVec4SmoothStep(SparkVec4 edge0,
	SparkVec4 edge1, SparkVec4 x);

#ifdef __STDC_VERSION__ >= 201112L

/* Vector addition */
#define SparkVecAdd(a, b)                                                      \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Add,                                                 \
      SparkVec3: SparkVec3Add,                                                 \
      SparkVec4: SparkVec4Add)(a, b)

/* Vector subtraction */
#define SparkVecSubtract(a, b)                                                 \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Subtract,                                            \
      SparkVec3: SparkVec3Subtract,                                            \
      SparkVec4: SparkVec4Subtract)(a, b)

/* Vector multiplication */
#define SparkVecMultiply(a, b)                                                 \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Multiply,                                            \
      SparkVec3: SparkVec3Multiply,                                            \
      SparkVec4: SparkVec4Multiply)(a, b)

/* Vector division */
#define SparkVecDivide(a, b)                                                   \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Divide,                                              \
      SparkVec3: SparkVec3Divide,                                              \
      SparkVec4: SparkVec4Divide)(a, b)

/* Vector scaling */
#define SparkVecScale(a, s)                                                    \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Scale,                                               \
      SparkVec3: SparkVec3Scale,                                               \
      SparkVec4: SparkVec4Scale)(a, s)

/* Vector dot product */
#define SparkVecDot(a, b)                                                      \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Dot,                                                 \
      SparkVec3: SparkVec3Dot,                                                 \
      SparkVec4: SparkVec4Dot)(a, b)

/* Vector length */
#define SparkVecLength(a)                                                      \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Length,                                              \
      SparkVec3: SparkVec3Length,                                              \
      SparkVec4: SparkVec4Length)(a)

/* Vector normalization */
#define SparkVecNormalize(a)                                                   \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Normalize,                                           \
      SparkVec3: SparkVec3Normalize,                                           \
      SparkVec4: SparkVec4Normalize)(a)

/* Vector distance */
#define SparkVecDistance(a, b)                                                 \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Distance,                                            \
      SparkVec3: SparkVec3Distance,                                            \
      SparkVec4: SparkVec4Distance)(a, b)

/* Vector negation */
#define SparkVecNegate(a)                                                      \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Negate,                                              \
      SparkVec3: SparkVec3Negate,                                              \
      SparkVec4: SparkVec4Negate)(a)

/* Vector angle (only for Vec2 and Vec3) */
#define SparkVecAngle(a, b)                                                    \
  _Generic((a), SparkVec2: SparkVec2Angle, SparkVec3: SparkVec3Angle)(a, b)

/* Vector reflection */
#define SparkVecReflect(v, n)                                                  \
  _Generic((v), SparkVec2: SparkVec2Reflect, SparkVec3: SparkVec3Reflect)(v, n)

/* Vector linear interpolation */
#define SparkVecLerp(a, b, t)                                                  \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Lerp,                                                \
      SparkVec3: SparkVec3Lerp,                                                \
      SparkVec4: SparkVec4Lerp)(a, b, t)

/* Vector cross product (only for Vec3) */
#define SparkVecCross(a, b) _Generic((a), SparkVec3: SparkVec3Cross)(a, b)

/* Matrix addition */
#define SparkMatAdd(a, b)                                                      \
  _Generic((a),                                                                \
      SparkMat2: SparkMat2Add,                                                 \
      SparkMat3: SparkMat3Add,                                                 \
      SparkMat4: SparkMat4Add)(a, b)

/* Matrix subtraction */
#define SparkMatSubtract(a, b)                                                 \
  _Generic((a),                                                                \
      SparkMat2: SparkMat2Subtract,                                            \
      SparkMat3: SparkMat3Subtract,                                            \
      SparkMat4: SparkMat4Subtract)(a, b)

/* Matrix multiplication */
#define SparkMatMultiply(a, b)                                                 \
  _Generic((a),                                                                \
      SparkMat2: SparkMat2Multiply,                                            \
      SparkMat3: SparkMat3Multiply,                                            \
      SparkMat4: SparkMat4Multiply)(a, b)

/* Matrix scaling */
#define SparkMatScale(a, s)                                                    \
  _Generic((a),                                                                \
      SparkMat2: SparkMat2Scale,                                               \
      SparkMat3: SparkMat3Scale,                                               \
      SparkMat4: SparkMat4Scale)(a, s)

/* Matrix transpose */
#define SparkMatTranspose(a)                                                   \
  _Generic((a),                                                                \
      SparkMat2: SparkMat2Transpose,                                           \
      SparkMat3: SparkMat3Transpose,                                           \
      SparkMat4: SparkMat4Transpose)(a)

/* Matrix determinant */
#define SparkMatDeterminant(a)                                                 \
  _Generic((a),                                                                \
      SparkMat2: SparkMat2Determinant,                                         \
      SparkMat3: SparkMat3Determinant,                                         \
      SparkMat4: SparkMat4Determinant)(a)

/* Matrix inverse */
#define SparkMatInverse(a)                                                     \
  _Generic((a),                                                                \
      SparkMat2: SparkMat2Inverse,                                             \
      SparkMat3: SparkMat3Inverse,                                             \
      SparkMat4: SparkMat4Inverse)(a)

/* Matrix identity (note: requires specifying the type) */
#define SparkMatIdentity(type)                                                 \
  _Generic(*(type *)0,                                                         \
      SparkMat2: SparkMat2Identity,                                            \
      SparkMat3: SparkMat3Identity,                                            \
      SparkMat4: SparkMat4Identity)()

/* Scalar and vector min function */
#define SparkMin(a, b)                                                         \
  _Generic((a),                                                                \
      SparkScalar: SparkMin,                                                   \
      SparkVec2: SparkVec2Min,                                                 \
      SparkVec3: SparkVec3Min,                                                 \
      SparkVec4: SparkVec4Min)(a, b)

/* Scalar and vector max function */
#define SparkMax(a, b)                                                         \
  _Generic((a),                                                                \
      SparkScalar: SparkMax,                                                   \
      SparkVec2: SparkVec2Max,                                                 \
      SparkVec3: SparkVec3Max,                                                 \
      SparkVec4: SparkVec4Max)(a, b)

/* Scalar and vector clamp function */
#define SparkClamp(x, min_val, max_val)                                        \
  _Generic((x),                                                                \
      SparkScalar: SparkClampS,                                                \
      SparkVec2: SparkVec2Clamp,                                               \
      SparkVec3: SparkVec3Clamp,                                               \
      SparkVec4: SparkVec4Clamp)(x, min_val, max_val)

/* Scalar and vector mix (linear interpolation) function */
#define SparkMix(a, b, t)                                                      \
  _Generic((a),                                                                \
      SparkScalar: SparkMix,                                                   \
      SparkVec2: SparkVec2Mix,                                                 \
      SparkVec3: SparkVec3Mix,                                                 \
      SparkVec4: SparkVec4Mix)(a, b, t)

/* Scalar and vector step function */
#define SparkStep(edge, x)                                                     \
  _Generic((x),                                                                \
      SparkScalar: SparkStep,                                                  \
      SparkVec2: SparkVec2Step,                                                \
      SparkVec3: SparkVec3Step,                                                \
      SparkVec4: SparkVec4Step)(edge, x)

/* Scalar and vector smoothstep function */
#define SparkSmoothStep(edge0, edge1, x)                                       \
  _Generic((x),                                                                \
      SparkScalar: SparkSmoothStep,                                            \
      SparkVec2: SparkVec2SmoothStep,                                          \
      SparkVec3: SparkVec3SmoothStep,                                          \
      SparkVec4: SparkVec4SmoothStep)(edge0, edge1, x)

/* Matrix-vector multiplication */
#define SparkMatMultiplyVec(m, v)                                              \
  _Generic((m),                                                                \
      SparkMat2: SparkMat2MultiplyVec2,                                        \
      SparkMat3: SparkMat3MultiplyVec3,                                        \
      SparkMat4: _Generic((v),                                                 \
      SparkVec3: SparkMat4MultiplyVec3,                                        \
      SparkVec4: SparkMat4MultiplyVec4))(m, v)

/* General vector functions */
#define SparkLength(v)                                                         \
  _Generic((v),                                                                \
      SparkVec2: SparkVec2Length,                                              \
      SparkVec3: SparkVec3Length,                                              \
      SparkVec4: SparkVec4Length)(v)

#define SparkNormalize(v)                                                      \
  _Generic((v),                                                                \
      SparkVec2: SparkVec2Normalize,                                           \
      SparkVec3: SparkVec3Normalize,                                           \
      SparkVec4: SparkVec4Normalize)(v)

#define SparkDot(a, b)                                                         \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Dot,                                                 \
      SparkVec3: SparkVec3Dot,                                                 \
      SparkVec4: SparkVec4Dot)(a, b)

#define SparkDistance(a, b)                                                    \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Distance,                                            \
      SparkVec3: SparkVec3Distance,                                            \
      SparkVec4: SparkVec4Distance)(a, b)

/* Cross product for SparkVec3 */
#define SparkCross(a, b) _Generic((a), SparkVec3: SparkVec3Cross)(a, b)

/* Reflect function for vectors */
#define SparkReflect(v, n)                                                     \
  _Generic((v), SparkVec2: SparkVec2Reflect, SparkVec3: SparkVec3Reflect)(v, n)

/* Component-wise vector min function */
#define SparkVecMin(a, b)                                                      \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Min,                                                 \
      SparkVec3: SparkVec3Min,                                                 \
      SparkVec4: SparkVec4Min)(a, b)

/* Component-wise vector max function */
#define SparkVecMax(a, b)                                                      \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Max,                                                 \
      SparkVec3: SparkVec3Max,                                                 \
      SparkVec4: SparkVec4Max)(a, b)

/* Component-wise vector clamp function */
#define SparkVecClamp(v, min_val, max_val)                                     \
  _Generic((v),                                                                \
      SparkVec2: SparkVec2Clamp,                                               \
      SparkVec3: SparkVec3Clamp,                                               \
      SparkVec4: SparkVec4Clamp)(v, min_val, max_val)

/* Component-wise vector mix function */
#define SparkVecMix(a, b, t)                                                   \
  _Generic((a),                                                                \
      SparkVec2: SparkVec2Mix,                                                 \
      SparkVec3: SparkVec3Mix,                                                 \
      SparkVec4: SparkVec4Mix)(a, b, t)

/* Component-wise vector step function */
#define SparkVecStep(edge, x)                                                  \
  _Generic((x),                                                                \
      SparkVec2: SparkVec2Step,                                                \
      SparkVec3: SparkVec3Step,                                                \
      SparkVec4: SparkVec4Step)(edge, x)

/* Component-wise vector smoothstep function */
#define SparkVecSmoothStep(edge0, edge1, x)                                    \
  _Generic((x),                                                                \
      SparkVec2: SparkVec2SmoothStep,                                          \
      SparkVec3: SparkVec3SmoothStep,                                          \
      SparkVec4: SparkVec4SmoothStep)(edge0, edge1, x)

#endif

#pragma endregion

/* Returns either a success or failure depending on the error code */
SPARKAPI SparkResult SPARKCALL SparkCheckSuccess(SparkResult result);

/* Hash functions */

SPARKAPI SparkSize SPARKCALL DJB2Hash(SparkConstBuffer buf, SparkSize size);
SPARKAPI SparkSize SPARKCALL FNV1AHash(SparkConstBuffer buf, SparkSize size);
SPARKAPI SparkSize SPARKCALL JenkinsHash(SparkConstBuffer buf, SparkSize size);
SPARKAPI SparkSize SPARKCALL Murmur2Hash(SparkConstBuffer buf, SparkSize size);
SPARKAPI SparkSize SPARKCALL SipHash(SparkConstBuffer buf, SparkSize size);
SPARKAPI SparkSize SPARKCALL XXHash(SparkConstBuffer buf, SparkSize size);
SPARKAPI SparkSize SPARKCALL SparkStringHash(SparkConstBuffer key,
	SparkSize key_size);
SPARKAPI SparkSize SPARKCALL SparkIntegerHash(SparkConstBuffer key,
	SparkSize key_size);
SPARKAPI SparkI32 SPARKCALL SparkStringCompare(SparkConstBuffer a,
	SparkSize a_size,
	SparkConstBuffer b,
	SparkSize b_size);
SPARKAPI SparkI32 SPARKCALL SparkIntegerCompare(SparkConstBuffer a,
	SparkSize a_size,
	SparkConstBuffer b,
	SparkSize b_size);

SPARKAPI SparkHandle SPARKCALL SparkAllocate(SparkSize size);
SPARKAPI SparkHandle SPARKCALL SparkReallocate(SparkHandle handle,
	SparkSize size);
SPARKAPI SparkHandle SPARKCALL SparkCallocate(SparkSize count, SparkSize size);
SPARKAPI SparkVoid SPARKCALL SparkFree(SparkHandle handle);
SPARKAPI SparkAllocator SPARKCALL SparkDefaultAllocator();
SPARKAPI SparkAllocator SPARKCALL SparkCreateAllocator(
	SparkAllocateFunction allocate, SparkReallocateFunction reallocate,
	SparkFreeFunction free);
SPARKAPI SparkVoid SPARKCALL SparkDestroyAllocator(SparkAllocator allocator);
SPARKAPI SparkAllocator SPARKCALL SparkCopyAllocator(SparkAllocator allocator);

SPARKAPI SparkPair* SPARKCALL SparkCreatePair(SparkHandle first,
	SparkHandle second);
SPARKAPI SparkVoid SPARKCALL SparkDestroyPair(SparkPair* pair);

SPARKAPI SparkVector SPARKCALL SparkDefaultVector();
SPARKAPI SparkVector SPARKCALL SparkCreateVector(SparkSize capacity,
	SparkAllocator allocator,
	SparkFreeFunction destructor);
SPARKAPI SparkVector SPARKCALL SparkMemcpyIntoVector(SparkSize size, SparkHandle* elements, SparkAllocator allocator, SparkFreeFunction destructor);
SPARKAPI SparkVoid SPARKCALL SparkDestroyVector(SparkVector vector);
SPARKAPI SparkVector SPARKCALL SparkCopyVector(SparkVector vector);
SPARKAPI SparkHandle SPARKCALL SparkGetElementVector(SparkVector vector,
	SparkIndex index);
SPARKAPI SparkResult SPARKCALL SparkPushBackVector(SparkVector vector,
	SparkHandle element);
SPARKAPI SparkResult SPARKCALL SparkPopBackVector(SparkVector vector);
SPARKAPI SparkResult SPARKCALL SparkInsertVector(SparkVector vector,
	SparkIndex index,
	SparkHandle element);
SPARKAPI SparkResult SPARKCALL SparkRemoveVector(SparkVector vector,
	SparkIndex index);
SPARKAPI SparkResult SPARKCALL SparkRemoveNoShiftVector(SparkVector vector,
	SparkSize index);
SPARKAPI SparkResult SPARKCALL SparkCompressVector(SparkVector vector);
SPARKAPI SparkResult SPARKCALL SparkEraseVector(SparkVector vector,
	SparkIndex start,
	SparkIndex end);
SPARKAPI SparkResult SPARKCALL SparkSetVector(SparkVector vector,
	SparkIndex index,
	SparkHandle element);
SPARKAPI SparkResult SPARKCALL SparkResizeVector(SparkVector vector,
	SparkSize capacity);
SPARKAPI SparkResult SPARKCALL SparkPushBackBufferVector(
	SparkVector vector, SparkConstBuffer buffer, SparkSize buffer_size);
SPARKAPI SparkResult SPARKCALL SparkClearVector(SparkVector vector);

SPARKAPI SparkList SPARKCALL SparkDefaultList();
SPARKAPI SparkList SPARKCALL SparkCreateList(SparkAllocator allocator,
	SparkFreeFunction destructor);
SPARKAPI SparkVoid SPARKCALL SparkDestroyList(SparkList list);
SPARKAPI SparkHandle SPARKCALL SparkGetElementList(SparkList list,
	SparkIndex index);
SPARKAPI SparkResult SPARKCALL SparkPushBackList(SparkList list,
	SparkHandle element);
SPARKAPI SparkResult SPARKCALL SparkPopBackList(SparkList list,
	SparkBuffer element);
SPARKAPI SparkResult SPARKCALL SparkInsertList(SparkList list, SparkIndex index,
	SparkHandle element);
SPARKAPI SparkResult SPARKCALL SparkRemoveList(SparkList list,
	SparkIndex index);
SPARKAPI SparkResult SPARKCALL SparkSetList(SparkList list, SparkIndex index,
	SparkHandle element);
SPARKAPI SparkResult SPARKCALL SparkClearList(SparkList list);

SPARKAPI SparkMap SPARKCALL SparkDefaultMap();
SPARKAPI SparkMap SPARKCALL SparkCreateMap(SparkAllocator allocator);
SPARKAPI SparkVoid SPARKCALL SparkDestroyMap(SparkMap map);
SPARKAPI SparkHandle SPARKCALL SparkGetElementMap(SparkMap map,
	SparkConstBuffer key);
SPARKAPI SparkResult SPARKCALL SparkInsertMap(SparkMap map,
	SparkConstBuffer key,
	SparkConstBuffer value);
SPARKAPI SparkResult SPARKCALL SparkRemoveMap(SparkMap map,
	SparkConstBuffer key);
SPARKAPI SparkResult SPARKCALL SparkSetMap(SparkMap map, SparkConstBuffer key,
	SparkConstBuffer value);
SPARKAPI SparkResult SPARKCALL SparkClearMap(SparkMap map);

SPARKAPI SparkHashMap SPARKCALL SparkDefaultHashMap();
SPARKAPI SparkHashMap SPARKCALL SparkCreateHashMap(
	SparkSize capacity, SparkHashFunction hash_function,
	SparkCompareFunction compare_function, SparkAllocator allocator,
	SparkFreeFunction key_destructor, SparkFreeFunction value_destructor);
SPARKAPI SparkVoid SPARKCALL SparkDestroyHashMap(SparkHashMap hashmap);
SPARKAPI SparkResult SPARKCALL SparkInsertHashMap(SparkHashMap hashmap,
	SparkHandle key,
	SparkSize key_size,
	SparkHandle value);
SPARKAPI SparkHandle SPARKCALL SparkGetElementHashMap(SparkHashMap hashmap,
	SparkHandle key,
	SparkSize key_size);
SPARKAPI SparkBool SPARKCALL SparkContainsHashMap(SparkHashMap hashmap,
	SparkHandle key,
	SparkSize key_size);
SPARKAPI SparkResult SPARKCALL SparkRemoveHashMap(SparkHashMap hashmap,
	SparkHandle key,
	SparkSize key_size);
SPARKAPI SparkVector SPARKCALL SparkGetAllKeysHashMap(SparkHashMap hashmap);
SPARKAPI SparkVector SPARKCALL SparkGetAllValuesHashMap(SparkHashMap hashmap);
SPARKAPI SparkVector SPARKCALL SparkGetAllPairsHashMap(SparkHashMap hasmap);

SPARKAPI SparkSet SPARKCALL SparkDefaultSet();
SPARKAPI SparkSet SPARKCALL SparkCreateSet(SparkSize capacity,
	SparkAllocator allocator,
	SparkFreeFunction destructor);
SPARKAPI SparkVoid SPARKCALL SparkDestroySet(SparkSet set);
SPARKAPI SparkHandle SPARKCALL SparkGetElementSet(SparkSet set,
	SparkSize index);
SPARKAPI SparkBool SPARKCALL SparkContainsSet(SparkSet set, SparkHandle element,
	SparkCompareFunction compare);
SPARKAPI SparkResult SPARKCALL SparkInsertSet(SparkSet set, SparkHandle element,
	SparkCompareFunction compare);
SPARKAPI SparkResult SPARKCALL SparkRemoveSet(SparkSet set, SparkHandle element,
	SparkCompareFunction compare);
SPARKAPI SparkResult SPARKCALL SparkClearSet(SparkSet set);

SPARKAPI SparkHashSet SPARKCALL SparkDefaultHashSet();
SPARKAPI SparkHashSet SPARKCALL SparkCreateHashSet(
	SparkSize capacity, SparkSize element_size, SparkHashFunction hash,
	SparkAllocator allocator, SparkFreeFunction destructor);
SPARKAPI SparkVoid SPARKCALL SparkDestroyHashSet(SparkHashSet hashset);
SPARKAPI SparkBool SPARKCALL SparkContainsHashSet(SparkHashSet hashset,
	SparkHandle element,
	SparkSize element_size);
SPARKAPI SparkResult SPARKCALL SparkInsertHashSet(SparkHashSet hashset,
	SparkHandle element,
	SparkSize element_size);
SPARKAPI SparkResult SPARKCALL SparkRemoveHashSet(SparkHashSet hashset,
	SparkHandle element,
	SparkSize element_size);
SPARKAPI SparkResult SPARKCALL SparkClearHashSet(SparkHashSet hashset);

SPARKAPI SparkQueue SPARKCALL SparkDefaultQueue();
SPARKAPI SparkQueue SPARKCALL SparkCreateQueue(SparkSize capacity,
	SparkAllocator allocator,
	SparkFreeFunction destructor);
SPARKAPI SparkVoid SPARKCALL SparkDestroyQueue(SparkQueue queue);
SPARKAPI SparkResult SPARKCALL SparkEnqueueQueue(SparkQueue queue,
	SparkHandle element);
SPARKAPI SparkResult SPARKCALL SparkDequeueQueue(SparkQueue queue);
SPARKAPI SparkHandle SPARKCALL SparkGetFrontQueue(SparkQueue queue);
SPARKAPI SparkHandle SPARKCALL SparkGetBackQueue(SparkQueue queue);
SPARKAPI SparkResult SPARKCALL SparkClearQueue(SparkQueue queue);

SPARKAPI SparkStack SPARKCALL SparkDefaultStack();
SPARKAPI SparkStack SPARKCALL SparkCreateStack(SparkSize capacity,
	SparkAllocator allocator,
	SparkFreeFunction destructor);
SPARKAPI SparkVoid SPARKCALL SparkDestroyStack(SparkStack stack);
SPARKAPI SparkResult SPARKCALL SparkPushStack(SparkStack stack,
	SparkHandle element);
SPARKAPI SparkResult SPARKCALL SparkPopStack(SparkStack stack);
SPARKAPI SparkHandle SPARKCALL SparkGetTopStack(SparkStack stack);
SPARKAPI SparkResult SPARKCALL SparkClearStack(SparkStack stack);

SPARKAPI SparkVectorIterator SPARKCALL
SparkCreateVectorIterator(SparkIteratorState start_state, SparkVector vector);
SPARKAPI SparkVoid SPARKCALL SparkDestroyVectorIterator(SparkVectorIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIterateForwardVectorIterator(SparkVectorIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIterateBackwardVectorIterator(SparkVectorIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIsAtBeginningVectorIterator(SparkVectorIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIsAtEndVectorIterator(SparkVectorIterator it);
SPARKAPI SparkHandle SPARKCALL
SparkGetCurrentVectorIterator(SparkVectorIterator it);
SPARKAPI SparkHandle SPARKCALL
SparkGetPreviousVectorIterator(SparkVectorIterator it);
SPARKAPI SparkHandle SPARKCALL
SparkGetNextVectorIterator(SparkVectorIterator it);
SPARKAPI SparkBool SPARKCALL SparkHasNextVectorIterator(SparkVectorIterator it);
SPARKAPI SparkBool SPARKCALL
SparkHasPreviousVectorIterator(SparkVectorIterator it);

SPARKAPI SparkListIterator SPARKCALL
SparkCreateListIterator(SparkIteratorState start_state, SparkList list);
SPARKAPI SparkVoid SPARKCALL SparkDestroyListIterator(SparkListIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIterateForwardListIterator(SparkListIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIterateBackwardListIterator(SparkListIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIsAtBeginningListIterator(SparkListIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIsAtEndListIterator(SparkListIterator it);
SPARKAPI SparkHandle SPARKCALL
SparkGetCurrentListIterator(SparkListIterator it);
SPARKAPI SparkHandle SPARKCALL
SparkGetPreviousListIterator(SparkListIterator it);
SPARKAPI SparkHandle SPARKCALL SparkGetNextListIterator(SparkListIterator it);
SPARKAPI SparkBool SPARKCALL SparkHasNextListIterator(SparkListIterator it);
SPARKAPI SparkBool SPARKCALL SparkHasPreviousListIterator(SparkListIterator it);

SPARKAPI SparkHashMapIterator SPARKCALL SparkCreateHashMapIterator(
	SparkIteratorState start_state, SparkHashMapIteratorType iterator_type,
	SparkHashMap hash_map);
SPARKAPI SparkVoid SPARKCALL
SparkDestroyHashMapIterator(SparkHashMapIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIterateForwardHashMapIterator(SparkHashMapIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIterateBackwardHashMapIterator(SparkHashMapIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIsAtBeginningHashMapIterator(SparkHashMapIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIsAtEndHashMapIterator(SparkHashMapIterator it);
SPARKAPI SparkHandle SPARKCALL
SparkGetCurrentHashMapIterator(SparkHashMapIterator it);
SPARKAPI SparkHandle SPARKCALL
SparkGetPreviousHashMapIterator(SparkHashMapIterator it);
SPARKAPI SparkHandle SPARKCALL
SparkGetNextHashMapIterator(SparkHashMapIterator it);
SPARKAPI SparkBool SPARKCALL
SparkHasNextHashMapIterator(SparkHashMapIterator it);
SPARKAPI SparkBool SPARKCALL
SparkHasPreviousHashMapIterator(SparkHashMapIterator it);

SPARKAPI SparkIterator SPARKCALL
SparkCreateIterator(SparkIteratorType iterator_type, SparkHandle collection);
SPARKAPI SparkVoid SPARKCALL SparkDestroyIterator(SparkIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIterateForwardIterator(SparkIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIterateBackwardIterator(SparkIterator it);
SPARKAPI SparkIteratorState SPARKCALL
SparkIsAtBeginningIterator(SparkIterator it);
SPARKAPI SparkIteratorState SPARKCALL SparkIsAtEndIterator(SparkIterator it);
SPARKAPI SparkHandle SPARKCALL SparkGetCurrentIterator(SparkIterator it);
SPARKAPI SparkHandle SPARKCALL SparkGetPreviousIterator(SparkIterator it);
SPARKAPI SparkHandle SPARKCALL SparkGetNextIterator(SparkIterator it);
SPARKAPI SparkBool SPARKCALL SparkHasNextIterator(SparkIterator it);
SPARKAPI SparkBool SPARKCALL SparkHasPreviousIterator(SparkIterator it);


/* Shader creation and deletion */
SPARKAPI SparkShader SPARKCALL SparkCreateShader(SparkApplication app,
	SparkShaderType type,
	SparkConstString filename);
SPARKAPI SparkShader SPARKCALL SparkCreateShaderE(SparkApplication app,
	SparkShaderType type,
	SparkConstString filename,
	SparkConstString entry);
SPARKAPI SparkVoid SPARKCALL SparkDestroyShader(SparkShader shader);

/* Shader utility functions */
SPARKAPI SparkResult SPARKCALL
SparkLoadShaderFromFile(SparkShader shader, SparkConstString file_path);
SPARKAPI SparkResult SPARKCALL SparkSetShaderSource(SparkShader shader,
	SparkConstString source);

SPARKAPI SparkTexture SPARKCALL SparkCreateTexture(SparkApplication app, SparkConstString image_path);
SPARKAPI SparkVoid SPARKCALL SparkDestroyTexture(SparkTexture texture);

SPARKAPI SparkStaticMesh SparkCreateStaticMesh(SparkApplication app, SparkVertex vertices[],
	SparkU32 vertices_size);
SPARKAPI SparkStaticMesh SPARKCALL
SparkCreateStaticMeshI(SparkApplication app, SparkVertex vertices[], SparkU32 vertices_size,
	SparkU32 indices[], SparkU32 indices_size);
SPARKAPI SparkVoid SPARKCALL SparkDestroyStaticMesh(SparkStaticMesh mesh);

SPARKAPI SparkDynamicMesh SparkCreateDynamicMesh(SparkApplication app, SparkVertex vertices[],
	SparkU32 vertices_size);
SPARKAPI SparkDynamicMesh SPARKCALL
SparkCreateDynamicMeshI(SparkApplication app, SparkVertex vertices[], SparkU32 vertices_size,
	SparkU32 indices[], SparkU32 indices_size);
SPARKAPI SparkVoid SPARKCALL SparkDestroyDynamicMesh(SparkDynamicMesh mesh);

/* Render loop functions */
SPARKAPI SparkResult SPARKCALL SparkClear(SparkU32 mask);
SPARKAPI SparkResult SPARKCALL SparkSetClearColor(SparkF32 red, SparkF32 green,
	SparkF32 blue,
	SparkF32 alpha);
SPARKAPI SparkResult SPARKCALL SparkSetViewport(SparkI32 x, SparkI32 y,
	SparkI32 width,
	SparkI32 height);

/* State setting functions */
SPARKAPI SparkResult SPARKCALL SparkEnable(SparkU32 capability);
SPARKAPI SparkResult SPARKCALL SparkDisable(SparkU32 capability);

/* Blend functions */
SPARKAPI SparkResult SPARKCALL SparkBlendFunc(SparkBlendMode sfactor,
	SparkBlendMode dfactor);

SPARKAPI SparkError SPARKCALL SparkGetError();
SPARKAPI SparkConstString SPARKCALL SparkGetErrorString(SparkError error);

SPARKAPI SparkResult SPARKCALL SparkAddRigidBody(SparkEcs ecs,
	SparkEntity entity,
	SparkRigidBody rigidBody);
SPARKAPI SparkResult SPARKCALL SparkAddCollider(SparkEcs ecs,
	SparkEntity entity,
	SparkCollider collider);

SPARKAPI SparkInput SPARKCALL SparkCreateInput();
SPARKAPI SparkVoid SPARKCALL SparkDestroyInput(SparkInput input);
SPARKAPI SparkVoid SPARKCALL SparkUpdateInput(SparkInput input);

SPARKAPI SparkBool SPARKCALL SparkInitAudio();
SPARKAPI SparkVoid SPARKCALL SparkShutdownAudio();
SPARKAPI SparkAudioBuffer SPARKCALL
SparkCreateAudioBuffer(SparkConstString file_path);
SPARKAPI SparkVoid SPARKCALL SparkDestroyAudioBuffer(SparkAudioBuffer buffer);
SPARKAPI SparkAudio SPARKCALL SparkCreateAudio(SparkAudioBuffer buffer);
SPARKAPI SparkVoid SPARKCALL SparkDestroyAudio(SparkAudio source);
SPARKAPI SparkVoid SPARKCALL SparkPlayAudio(SparkAudio source);
SPARKAPI SparkVoid SPARKCALL SparkStopAudio(SparkAudio source);
SPARKAPI SparkVoid SPARKCALL SparkPauseAudio(SparkAudio source);
SPARKAPI SparkVoid SPARKCALL SparkRewindAudio(SparkAudio source);
SPARKAPI SparkVoid SPARKCALL SparkSetAudioPosition(SparkAudio source,
	SparkVec3 pos);
SPARKAPI SparkVoid SPARKCALL SparkSetAudioGain(SparkAudio source,
	SparkF32 gain);
SPARKAPI SparkVoid SPARKCALL SparkSetAudioPitch(SparkAudio source,
	SparkF32 pitch);
SPARKAPI SparkVoid SPARKCALL SparkSetAudioLooping(SparkAudio source,
	SparkBool loop);

SPARKAPI SparkFileSerializer SPARKCALL
SparkCreateFileSerializer(SparkConstString path);
SPARKAPI SparkVoid SPARKCALL
SparkDestroyFileSerializer(SparkFileSerializer serializer);
SPARKAPI SparkResult SPARKCALL SparkSerializeRawData(
	SparkFileSerializer serializer, SparkHandle data, SparkSize size);
SPARKAPI SparkResult SPARKCALL SparkSerializeData(
	SparkFileSerializer serializer, SparkHandle data, SparkSize size);
SPARKAPI SparkResult SPARKCALL
SparkSerializeHeader(SparkFileSerializer serializer);
SPARKAPI SparkResult SPARKCALL
SparkSerializeVector(SparkFileSerializer serializer, SparkVector vector);
SPARKAPI SparkFileDeserializer SPARKCALL
SparkCreateFileDeserializer(SparkConstString path);
SPARKAPI SparkVoid SPARKCALL
SparkDestroyFileDeserializer(SparkFileDeserializer deserializer);
SPARKAPI SparkResult SPARKCALL SparkDeserializeRawData(
	SparkFileDeserializer deserializer, SparkHandle data, SparkSize size);
SPARKAPI SparkResult SPARKCALL SparkDeserializeData(
	SparkFileDeserializer deserializer, SparkHandle* data, SparkSize* size);
SPARKAPI SparkResult SPARKCALL
SparkDeserializeVector(SparkFileDeserializer deserializer, SparkVector* vector);
SPARKAPI SparkResult SPARKCALL
SparkDeserializeHeader(SparkFileDeserializer deserializer);
SPARKAPI SparkResult SPARKCALL SparkDeserializeString(
	SparkFileDeserializer deserializer, SparkBuffer* data, SparkSize* size);
SPARKAPI SparkResult SPARKCALL SparkDeserializeTrivial(
	SparkFileDeserializer deserializer, SparkHandle data, SparkSize size);

SPARKAPI SparkScene SPARKCALL SparkCreateScene(SparkVec4 sky_color);
SPARKAPI SparkVoid SPARKCALL SparkDestroyScene(SparkScene scene);

SPARKAPI SparkResourceManager SPARKCALL SparkCreateResourceManager(
	SparkConstString type, SparkFreeFunction resource_free);
SPARKAPI SparkVoid SPARKCALL
SparkDestroyResourceManager(SparkResourceManager manager);
SPARKAPI SparkResult SPARKCALL SparkAddResource(SparkResourceManager manager,
	SparkResource resource);
SPARKAPI SparkResult SPARKCALL SparkRemoveResource(SparkResourceManager manager,
	SparkConstString name);
SPARKAPI SparkHandle SPARKCALL SparkCreateResourceData(SparkConstString type,
	...);
SPARKAPI SparkResource SPARKCALL SparkCreateResource(
	SparkResourceManager manager, SparkConstString name, SparkHandle data);
SPARKAPI SparkResource SPARKCALL SparkGetResource(SparkResourceManager manager,
	SparkConstString name);
SPARKAPI SparkResult SPARKCALL SparkSetCurrentResource(SparkResourceManager manager, SparkConstString resource_name);

SPARKAPI SparkQuery SPARKCALL SparkCreateQuery(
	SparkConstString* component_types,
	SparkSize component_count
);
SPARKAPI SparkVector SPARKCALL SparkPerformQuery(
	SparkEcs ecs,
	SparkQuery query
);
SPARKAPI SparkVoid SPARKCALL SparkInvalidateQueryCaches(
	SparkEcs ecs
);
SPARKAPI SparkU64 GetComponentBit(SparkConstString component_type);

SPARKAPI SparkAnimation SPARKCALL
SparkCreateAnimation(SparkConstString file_path);
SPARKAPI SparkVoid SPARKCALL SparkDestroyAnimation(SparkAnimation animation);
SPARKAPI SparkResult SPARKCALL SparkPlayAnimation(SparkEntity entity,
	SparkAnimation animation);

SPARKAPI SparkGuiElement SPARKCALL SparkCreateGuiElement(SparkConstString type);
SPARKAPI SparkVoid SPARKCALL SparkDestroyGuiElement(SparkGuiElement element);
SPARKAPI SparkResult SPARKCALL SparkSetGuiElementProperty(
	SparkGuiElement element, SparkConstString property, SparkHandle value);
SPARKAPI SparkVoid SPARKCALL SparkRenderGui(SparkGuiElement root);

SPARKAPI SparkAIBehavior SPARKCALL SparkCreateAIBehavior(SparkConstString type);
SPARKAPI SparkVoid SPARKCALL SparkDestroyAIBehavior(SparkAIBehavior behavior);
SPARKAPI SparkResult SPARKCALL SparkSetAIBehavior(SparkEntity entity,
	SparkAIBehavior behavior);

SPARKAPI SparkParticleEmitter SPARKCALL SparkCreateParticleEmitter();
SPARKAPI SparkVoid SPARKCALL
SparkDestroyParticleEmitter(SparkParticleEmitter emitter);
SPARKAPI SparkResult SPARKCALL SparkSetParticleEmitterProperties(
	SparkParticleEmitter emitter /* properties */);
SPARKAPI SparkVoid SPARKCALL SparkEmitParticles(SparkParticleEmitter emitter,
	SparkSize count);

SPARKAPI SparkFont SPARKCALL SparkCreateFont(SparkConstString file_path,
	SparkScalar size);
SPARKAPI SparkVoid SPARKCALL SparkDestroyFont(SparkFont font);
SPARKAPI SparkVoid SPARKCALL SparkRenderText(SparkText* text);

SPARKAPI SparkMaterial SPARKCALL SparkCreateMaterial();
SPARKAPI SparkVoid SPARKCALL SparkDestroyMaterial(SparkMaterial material);

SPARKAPI SparkStaticModel SPARKCALL
SparkCreateStaticModel(SparkStaticMesh mesh, SparkMaterial material);
SPARKAPI SparkVoid SPARKCALL SparkDestroyStaticModel(SparkStaticModel model);

SPARKAPI SparkDynamicModel SPARKCALL
SparkCreateDynamicModel(SparkDynamicMesh mesh, SparkMaterial material);
SPARKAPI SparkVoid SPARKCALL SparkDestroyDynamicModel(SparkDynamicModel model);

/* Miscellaneous utility functions */
SPARKAPI SparkVoid SPARKCALL SparkSetWindowTitle(SparkWindow window,
	SparkConstString title);
SPARKAPI SparkVoid SPARKCALL SparkSetWindowSize(SparkWindow window,
	SparkI32 width,
	SparkI32 height);
SPARKAPI SparkVoid SPARKCALL SparkGetWindowSize(SparkWindow window,
	SparkI32* width,
	SparkI32* height);

SPARKAPI SparkEcs SPARKCALL SparkCreateEcs(SparkEventHandler event_handler);
SPARKAPI SparkVoid SPARKCALL SparkDestroyEcs(SparkEcs ecs);
SPARKAPI SparkEntity SPARKCALL SparkCreateEntity(SparkEcs ecs);
SPARKAPI SparkResult SPARKCALL SparkDestroyEntity(SparkEcs ecs,
	SparkEntity entity_id);
SPARKAPI SparkComponent SPARKCALL
SparkCreateComponent(SparkConstString type, SparkConstString name,
	SparkHandle data, SparkFreeFunction destructor);
SPARKAPI SparkResult SPARKCALL SparkAddComponent(SparkEcs ecs,
	SparkEntity entity_id,
	SparkComponent component);
SPARKAPI SparkResult SPARKCALL SparkRemoveComponent(
	SparkEcs ecs, SparkEntity entity_id, SparkConstString component_type,
	SparkConstString component_name);
SPARKAPI SparkComponent SPARKCALL SparkGetComponent(
	SparkEcs ecs, SparkEntity entity_id, SparkConstString component_type,
	SparkConstString component_name);
SPARKAPI SparkVector SPARKCALL
SparkGetAllComponentsByType(SparkEcs ecs, SparkConstString component_type);
SPARKAPI SparkVector SPARKCALL
SparkGetAllComponentsByEntity(SparkEcs ecs, SparkEntity entity_id);
SPARKAPI SparkResult SPARKCALL SparkAddSystem(SparkEcs ecs, SparkSystem system);
SPARKAPI SparkResult SPARKCALL SparkRemoveSystem(SparkEcs ecs,
	SparkSystem system);
SPARKAPI SparkResult SPARKCALL SparkStartEcs(SparkEcs ecs);
SPARKAPI SparkResult SPARKCALL SparkUpdateEcs(SparkEcs ecs, SparkF32 delta);
SPARKAPI SparkResult SPARKCALL SparkStopEcs(SparkEcs ecs);
SPARKAPI SparkResult SPARKCALL
SparkRemoveAllEntityComponents(SparkEcs ecs, SparkEntity entity_id);

SPARKAPI SparkComponent SPARKCALL SparkDefaultTransformComponent(SparkConstString name);
SPARKAPI SparkComponent SPARKCALL SparkCreateTransformComponent(SparkConstString name, SparkVec3 pos, SparkQuat rot, SparkVec3 scale);
SPARKAPI SparkComponent SPARKCALL SparkCreateTransformComponentPos(SparkConstString name, SparkVec3 pos);
SPARKAPI SparkComponent SPARKCALL SparkCreateTransformComponentRot(SparkConstString name, SparkVec3 pos, SparkQuat rot);
SPARKAPI SparkVoid SPARKCALL SparkDestroyTransformComponent(SparkTransformComponent comp);

SPARKAPI SparkComponent SPARKCALL SparkCreateStaticModelComponent(SparkConstString name, SparkConstString model_name);
SPARKAPI SparkVoid SPARKCALL SparkDestroyStaticModelComponent(SparkStaticModelComponent comp);

SPARKAPI SparkComponent SPARKCALL SparkCreateDynamicModelComponent(SparkConstString name, SparkConstString model_name);
SPARKAPI SparkVoid SPARKCALL SparkDestroyDynamicModelComponent(SparkDynamicModelComponent comp);

SPARKAPI SparkEventHandler SPARKCALL SparkCreateEventHandler();
SPARKAPI SparkResult SPARKCALL
SparkDestroyEventHandler(SparkEventHandler event_handler);
SPARKAPI SparkResult SPARKCALL SparkAddEventListener(
	SparkEventHandler event_handler, SparkEventType event_type,
	SparkApplicationEventFunction function, SparkPair thread_settings);
SPARKAPI SparkResult SPARKCALL SparkRemoveEventListener(
	SparkEventHandler event_handler, SparkEventType event_type,
	SparkApplicationEventFunction function);
SPARKAPI SparkResult SPARKCALL SparkAddQueryEventListener(
	SparkEventHandler event_handler,
	SparkEventType event_type,
	SparkQuery query,
	SparkApplicationQueryEventFunction function,
	SparkPair thread_settings
);
SPARKAPI SparkResult SPARKCALL SparkRemoveQueryEventListener(
	SparkEventHandler event_handler,
	SparkEventType event_type,
	SparkConstString component_type,
	SparkApplicationQueryEventFunction function
);
SPARKAPI SparkResult SPARKCALL
SparkDispatchEvent(SparkEventHandler event_handler, SparkEvent event);
SPARKAPI SparkEvent SPARKCALL SparkCreateEvent(SparkEventType event_type,
	SparkHandle event_data,
	SparkFreeFunction destructor);
SPARKAPI SparkEvent SPARKCALL SparkCreateEventT(SparkEventType event_type,
	SparkHandle event_data,
	SparkFreeFunction destructor,
	SparkConstString time_stamp);
SPARKAPI SparkResult SPARKCALL SparkDestroyEvent(SparkEvent event);

SPARKAPI SparkWindowData SPARKCALL SparkCreateWindowData(SparkConstString title,
	SparkI32 width,
	SparkI32 height,
	SparkBool vsync,
	SparkPresentMode present);
SPARKAPI SparkVoid SPARKCALL
SparkDestroyWindowData(SparkWindowData window_data);
SPARKAPI SparkWindow SPARKCALL SparkCreateWindow(SparkWindowData window_data);
SPARKAPI SparkVoid SPARKCALL SparkDestroyWindow(SparkWindow window);


SPARKAPI SparkThreadPool SPARKCALL
SparkCreateThreadPool(SparkSize thread_count);
SPARKAPI SparkVoid SPARKCALL SparkDestroyThreadPool(SparkThreadPool pool);
SPARKAPI SparkVoid SPARKCALL SparkWaitThreadPool(SparkThreadPool pool);
SPARKAPI SparkTaskHandle SPARKCALL SparkAddTaskThreadPool(
	SparkThreadPool pool, SparkThreadFunction function, SparkHandle arg);
SPARKAPI SparkBool SPARKCALL SparkIsTaskDone(SparkTaskHandle task);
SPARKAPI SparkResult SPARKCALL SparkWaitTask(SparkTaskHandle task);
SPARKAPI SparkVoid SPARKCALL SparkTaskDestroy(SparkTaskHandle task);
SPARKAPI SparkVoid SparkAddShutdownCallbackThreadPool(
	SparkThreadPool pool, SparkThreadPoolShutdownCallback callback,
	SparkHandle arg);

SPARKAPI SparkGraphicsPipelineConfig SPARKCALL SparkCreateGraphicsPipelineConfig(SparkApplication app, SparkShader vert, SparkShader frag, SparkShader comp, SparkShader geom, SparkShader tess_cont, SparkShader tess_eval);
SPARKAPI SparkVoid SPARKCALL SparkDestroyGraphicsPipelineConfig(SparkGraphicsPipelineConfig gp);

SPARKAPI SparkServer SPARKCALL SparkCreateServer(
	SparkThreadPool tp, SparkU16 port, SparkServerReceiveCallback callback);
SPARKAPI SparkVoid SPARKCALL SparkDestroyServer(SparkServer server);
SPARKAPI SparkResult SPARKCALL SparkStartServer(SparkServer server);
SPARKAPI SparkResult SPARKCALL SparkStopServer(SparkServer server);
SPARKAPI SparkResult SPARKCALL SparkSendToClient(SparkServer server,
	SparkClientConnection client,
	SparkEnvelope* envelope);
SPARKAPI SparkResult SPARKCALL SparkBroadcast(SparkServer server,
	SparkEnvelope* envelope);

SPARKAPI SparkClient SPARKCALL
SparkCreateClient(SparkThreadPool tp, SparkConstString address, SparkU16 port,
	SparkClientReceiveCallback callback);
SPARKAPI SparkVoid SPARKCALL SparkDestroyClient(SparkClient client);
SPARKAPI SparkResult SPARKCALL SparkConnectClient(SparkClient client);
SPARKAPI SparkResult SPARKCALL SparkDisconnectClient(SparkClient client);
SPARKAPI SparkResult SPARKCALL SparkSendToServer(SparkClient client,
	SparkEnvelope* envelope);

SPARKAPI SparkResult SPARKCALL SparkSerializeEnvelope(SparkEnvelope* envelope,
	SparkBuffer* buffer,
	SparkSize* size);
SPARKAPI SparkResult SPARKCALL SparkDeserializeEnvelope(
	SparkBuffer buffer, SparkSize size, SparkEnvelope* envelope);

SPARKAPI SparkApplication SPARKCALL
SparkCreateApplication(SparkWindow window, SparkSize thread_count);
SPARKAPI SparkVoid SPARKCALL SparkDestroyApplication(SparkApplication app);
SPARKAPI SparkResult SPARKCALL
SparkDispatchEventApplication(SparkApplication app, SparkEvent event);
SPARKAPI SparkResult SPARKCALL SparkAddStartFunctionApplication(
	SparkApplication app, SparkApplicationStartFunction function,
	SparkPair thread_settings);
SPARKAPI SparkResult SPARKCALL SparkAddUpdateFunctionApplication(
	SparkApplication app, SparkApplicationUpdateFunction function,
	SparkPair thread_settings);
SPARKAPI SparkResult SPARKCALL SparkAddStopFunctionApplication(
	SparkApplication app, SparkApplicationStopFunction function,
	SparkPair thread_settings);
SPARKAPI SparkResult SPARKCALL SparkAddEventFunctionApplication(
	SparkApplication app, SparkEventType event_type,
	SparkApplicationEventFunction function, SparkPair thread_settings);
SPARKAPI SparkResult SPARKCALL SparkAddQueryFunctionApplication(
	SparkApplication app,
	SparkQuery query,
	SparkApplicationQueryFunction function,
	SparkPair thread_settings);
SPARKAPI SparkResult SPARKCALL SparkAddQueryEventFunctionApplication(
	SparkApplication app,
	SparkEventType event_type,
	SparkQuery query,
	SparkApplicationQueryEventFunction function,
	SparkPair thread_settings);
SPARKAPI SparkResource SPARKCALL
SparkCreateResourceApplication(SparkApplication app, SparkConstString type,
	SparkConstString name, SparkHandle data);
SPARKAPI SparkResource SPARKCALL SparkGetResourceApplication(
	SparkApplication app, SparkConstString type, SparkConstString name);
SPARKAPI SparkResult SPARKCALL SparkAddResourceApplication(
	SparkApplication app, SparkConstString type, SparkResource resource);
SPARKAPI SparkResult SPARKCALL SparkRemoveResourceApplication(
	SparkApplication app, SparkConstString type, SparkConstString name);
SPARKAPI SparkResult SPARKCALL
SparkAddResourceManagerApplication(SparkApplication app, SparkConstString type,
	SparkFreeFunction resource_destructor);
SPARKAPI SparkResult SPARKCALL SparkStartApplication(SparkApplication app);
SPARKAPI SparkResult SPARKCALL SparkStopApplication(SparkApplication app);
SPARKAPI SparkMaterial SPARKCALL SparkGetMaterialApplication(SparkApplication app, SparkConstString name);
SPARKAPI SparkStaticMesh SPARKCALL SparkGetStaticMeshApplication(SparkApplication app, SparkConstString name);
SPARKAPI SparkDynamicMesh SPARKCALL SparkGetDynamicMeshApplication(SparkApplication app, SparkConstString name);

#ifdef __cplusplus
}
#endif
#endif /* SPARK_H */